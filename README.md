# Weather Forecast API

API –¥–ª—è –æ–±—Ä–∞–±–æ—Ç–∫–∏ –ø—Ä–æ–≥–Ω–æ–∑–∞ –ø–æ–≥–æ–¥—ã —Å —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è–º–∏ –≤ Telegram.

## –û–ø–∏—Å–∞–Ω–∏–µ

–ü—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –∑–∞–ø—Ä–∞—à–∏–≤–∞–µ—Ç –ø—Ä–æ–≥–Ω–æ–∑ –ø–æ–≥–æ–¥—ã –¥–ª—è –º–æ—Ä—Å–∫–æ–≥–æ –ø–æ–±–µ—Ä–µ–∂—å—è (–ì–∞–≥—Ä—Å–∫–∏–π —Ä–∞–π–æ–Ω) –ø–æ –∑–∞–¥–∞–Ω–Ω—ã–º –∫–æ–æ—Ä–¥–∏–Ω–∞—Ç–∞–º, –æ–±—Ä–∞–±–∞—Ç—ã–≤–∞–µ—Ç –¥–∞–Ω–Ω—ã–µ –∏ –æ—Ç–ø—Ä–∞–≤–ª—è–µ—Ç —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ã –≤ Telegram-–≥—Ä—É–ø–ø—É –¥–≤–∞ —Ä–∞–∑–∞ –≤ –Ω–µ–¥–µ–ª—é, —Å –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç—å—é —Ä–∞—Å—à–∏—Ä–µ–Ω–∏—è —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª–∞.

## –¢—Ä–µ–±–æ–≤–∞–Ω–∏—è

- PHP 8.2 –∏–ª–∏ –≤—ã—à–µ
- Composer
- CRON
- FTP/SFTP –¥–æ—Å—Ç—É–ø –∫ —Ö–æ—Å—Ç–∏–Ω–≥—É

## –£—Å—Ç–∞–Ω–æ–≤–∫–∞

1. –ö–ª–æ–Ω–∏—Ä–æ–≤–∞—Ç—å —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–π:
   ```bash
   git clone https://github.com/your-username/weather-forecast-api.git
   cd weather-forecast-api
   ```

2. –£—Å—Ç–∞–Ω–æ–≤–∏—Ç—å –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏:
   ```bash
   composer install --no-dev --optimize-autoloader
   ```

3. –°–æ–∑–¥–∞—Ç—å –∏ –Ω–∞—Å—Ç—Ä–æ–∏—Ç—å `.env` —Ñ–∞–π–ª:
   ```bash
   cp .env.example .env
   php artisan key:generate
   ```

4. –ù–∞—Å—Ç—Ä–æ–∏—Ç—å –≤ `.env` —Ñ–∞–π–ª–µ:
   ```
   # Telegram Bot
   TELEGRAM_BOT_TOKEN=your_bot_token
   TELEGRAM_CHAT_ID=your_chat_id

   # Weather APIs
   WINDY_API_KEY=your_windy_api_key
   OPENWEATHERMAP_API_KEY=your_openweathermap_api_key

   # Location Coordinates (Alahadzha, Gagra District)
   WEATHER_LAT=43.1739
   WEATHER_LON=40.2628

   # Weather Message Format (table, text, both)
   WEATHER_FORMAT=both
   ```

5. –°–æ–∑–¥–∞—Ç—å –∫—ç—à –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏:
   ```bash
   php artisan config:cache
   php artisan route:cache
   ```

## –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ

### –ö–æ–º–∞–Ω–¥—ã Artisan

- –ó–∞–ø—É—Å–∫ –∑–∞–¥–∞—á–∏ –ø–æ–ª—É—á–µ–Ω–∏—è –∏ –æ—Ç–ø—Ä–∞–≤–∫–∏ –ø—Ä–æ–≥–Ω–æ–∑–∞ –ø–æ–≥–æ–¥—ã:
  ```bash
  php artisan weather:fetch-and-send
  ```

- –û—Ç–ø—Ä–∞–≤–∫–∞ —Ç–µ—Å—Ç–æ–≤–æ–≥–æ —Å–æ–æ–±—â–µ–Ω–∏—è —á–µ—Ä–µ–∑ Windy API:
  ```bash
  php artisan weather:fetch-and-send --test-windy
  ```

- –û—Ç–ø—Ä–∞–≤–∫–∞ —Ç–µ—Å—Ç–æ–≤–æ–≥–æ —Å–æ–æ–±—â–µ–Ω–∏—è —á–µ—Ä–µ–∑ OpenWeatherMap API:
  ```bash
  php artisan weather:fetch-and-send --test-openweathermap
  ```

### –ù–∞—Å—Ç—Ä–æ–π–∫–∞ CRON –Ω–∞ shared-—Ö–æ—Å—Ç–∏–Ω–≥–µ

–î–æ–±–∞–≤—å—Ç–µ —Å–ª–µ–¥—É—é—â—É—é —Å—Ç—Ä–æ–∫—É –≤ crontab —Ö–æ—Å—Ç–∏–Ω–≥–∞:

```
* * * * * cd /path/to/project && php artisan schedule:run >> /dev/null 2>&1
```

–≠—Ç–∞ –∫–æ–º–∞–Ω–¥–∞ –±—É–¥–µ—Ç –∑–∞–ø—É—Å–∫–∞—Ç—å—Å—è –∫–∞–∂–¥—É—é –º–∏–Ω—É—Ç—É –∏ –ø—Ä–æ–≤–µ—Ä—è—Ç—å, –µ—Å—Ç—å –ª–∏ –∑–∞–¥–∞—á–∏, –∑–∞–ø–ª–∞–Ω–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ –¥–ª—è –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è.

## –ü–æ–ª—É—á–µ–Ω–∏–µ API-–∫–ª—é—á–µ–π

### Windy API

1. –ü–µ—Ä–µ–π–¥–∏—Ç–µ –Ω–∞ —Å—Ç—Ä–∞–Ω–∏—Ü—É [Windy API](https://api.windy.com/)
2. –ó–∞—Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä—É–π—Ç–µ—Å—å –∏–ª–∏ –≤–æ–π–¥–∏—Ç–µ –≤ —Å—É—â–µ—Å—Ç–≤—É—é—â–∏–π –∞–∫–∫–∞—É–Ω—Ç
3. –ü–µ—Ä–µ–π–¥–∏—Ç–µ –≤ —Ä–∞–∑–¥–µ–ª "API Keys" –≤ –ª–∏—á–Ω–æ–º –∫–∞–±–∏–Ω–µ—Ç–µ
4. –°–æ–∑–¥–∞–π—Ç–µ –Ω–æ–≤—ã–π API-–∫–ª—é—á, —É–∫–∞–∑–∞–≤ –Ω–∞–∑–≤–∞–Ω–∏–µ –ø—Ä–æ–µ–∫—Ç–∞
5. –°–∫–æ–ø–∏—Ä—É–π—Ç–µ –ø–æ–ª—É—á–µ–Ω–Ω—ã–π API-–∫–ª—é—á –∏ —Å–æ—Ö—Ä–∞–Ω–∏—Ç–µ –µ–≥–æ –≤ `.env` —Ñ–∞–π–ª

### OpenWeatherMap API

1. –ü–µ—Ä–µ–π–¥–∏—Ç–µ –Ω–∞ —Å—Ç—Ä–∞–Ω–∏—Ü—É [OpenWeatherMap API](https://openweathermap.org/api)
2. –ó–∞—Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä—É–π—Ç–µ—Å—å –∏–ª–∏ –≤–æ–π–¥–∏—Ç–µ –≤ —Å—É—â–µ—Å—Ç–≤—É—é—â–∏–π –∞–∫–∫–∞—É–Ω—Ç
3. –ü–µ—Ä–µ–π–¥–∏—Ç–µ –≤ –ª–∏—á–Ω—ã–π –∫–∞–±–∏–Ω–µ—Ç –∏ –Ω–∞–π–¥–∏—Ç–µ —Ä–∞–∑–¥–µ–ª "API keys"
4. –ï—Å–ª–∏ —É –≤–∞—Å –Ω–µ—Ç –∫–ª—é—á–∞, —Å–æ–∑–¥–∞–π—Ç–µ –Ω–æ–≤—ã–π
5. –°–∫–æ–ø–∏—Ä—É–π—Ç–µ –ø–æ–ª—É—á–µ–Ω–Ω—ã–π API-–∫–ª—é—á –∏ —Å–æ—Ö—Ä–∞–Ω–∏—Ç–µ –µ–≥–æ –≤ `.env` —Ñ–∞–π–ª
6. –û–±—Ä–∞—Ç–∏—Ç–µ –≤–Ω–∏–º–∞–Ω–∏–µ, —á—Ç–æ –∞–∫—Ç–∏–≤–∞—Ü–∏—è –∫–ª—é—á–∞ –º–æ–∂–µ—Ç –∑–∞–Ω—è—Ç—å –¥–æ 2 —á–∞—Å–æ–≤

## –ù–∞—Å—Ç—Ä–æ–π–∫–∞ Telegram-–±–æ—Ç–∞

1. –°–æ–∑–¥–∞–π—Ç–µ –±–æ—Ç–∞ —á–µ—Ä–µ–∑ [@BotFather](https://t.me/BotFather) –≤ Telegram
2. –ü–æ–ª—É—á–∏—Ç–µ —Ç–æ–∫–µ–Ω –±–æ—Ç–∞ –∏ –¥–æ–±–∞–≤—å—Ç–µ –µ–≥–æ –≤ `.env` —Ñ–∞–π–ª
3. –î–æ–±–∞–≤—å—Ç–µ –±–æ—Ç–∞ –≤ –Ω—É–∂–Ω—É—é –≥—Ä—É–ø–ø—É –∏–ª–∏ –Ω–∞—á–Ω–∏—Ç–µ —Å –Ω–∏–º –¥–∏–∞–ª–æ–≥
4. –ü–æ–ª—É—á–∏—Ç–µ ID —á–∞—Ç–∞/–≥—Ä—É–ø–ø—ã (–º–æ–∂–Ω–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å [@userinfobot](https://t.me/userinfobot))
5. –î–æ–±–∞–≤—å—Ç–µ ID —á–∞—Ç–∞/–≥—Ä—É–ø–ø—ã –≤ `.env` —Ñ–∞–π–ª

## –†–∞—Å–ø–∏—Å–∞–Ω–∏–µ –æ—Ç–ø—Ä–∞–≤–∫–∏

- –í –ª–µ—Ç–Ω–∏–π –ø–µ—Ä–∏–æ–¥ (–∏—é–Ω—å-–∞–≤–≥—É—Å—Ç): –≤–æ—Å–∫—Ä–µ—Å–µ–Ω—å–µ, –≤—Ç–æ—Ä–Ω–∏–∫, —á–µ—Ç–≤–µ—Ä–≥ –≤ 8:00 —É—Ç—Ä–∞ (UTC+3)
- –í –æ—Å—Ç–∞–ª—å–Ω–æ–µ –≤—Ä–µ–º—è: –≤–æ—Å–∫—Ä–µ—Å–µ–Ω—å–µ, —Å—Ä–µ–¥–∞ –≤ 8:00 —É—Ç—Ä–∞ (UTC+3)

## –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è

–û—Å–Ω–æ–≤–Ω—ã–µ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ —Ö—Ä–∞–Ω—è—Ç—Å—è –≤ —Ñ–∞–π–ª–µ `config/weather.php`:

- –ö–æ–æ—Ä–¥–∏–Ω–∞—Ç—ã –ª–æ–∫–∞—Ü–∏–π
- –í—Ä–µ–º–µ–Ω–Ω—ã–µ –∏–Ω—Ç–µ—Ä–≤–∞–ª—ã –¥–ª—è –ø—Ä–æ–≥–Ω–æ–∑–∞ (—É—Ç—Ä–æ, –ø–æ–ª–¥–µ–Ω—å, –≤–µ—á–µ—Ä)
- –ù–∞—Å—Ç—Ä–æ–π–∫–∏ API (–∫–ª—é—á–∏, URL, —Ç–∞–π–º-–∞—É—Ç—ã)
- –§–æ—Ä–º–∞—Ç —Å–æ–æ–±—â–µ–Ω–∏–π (—Ç–∞–±–ª–∏—Ü–∞, —Ç–µ–∫—Å—Ç, –æ–±–∞)
- –†–∞—Å–ø–∏—Å–∞–Ω–∏–µ –æ—Ç–ø—Ä–∞–≤–∫–∏

## –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–π –¥–µ–ø–ª–æ–π

–ü—Ä–æ–µ–∫—Ç –Ω–∞—Å—Ç—Ä–æ–µ–Ω –¥–ª—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–≥–æ –¥–µ–ø–ª–æ—è —á–µ—Ä–µ–∑ GitHub Actions. –ü—Ä–∏ –ø—É—à–µ –≤ –≤–µ—Ç–∫—É `main` –∫–æ–¥ –±—É–¥–µ—Ç –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –∑–∞–≥—Ä—É–∂–µ–Ω –Ω–∞ —Ö–æ—Å—Ç–∏–Ω–≥ –ø–æ FTP.
```

### –ò—Ç–æ–≥–æ–≤–∞—è —Å—Ç—Ä—É–∫—Ç—É—Ä–∞ –ø—Ä–æ–µ–∫—Ç–∞

```
.
‚îú‚îÄ‚îÄ .github
‚îÇ   ‚îî‚îÄ‚îÄ workflows
‚îÇ       ‚îî‚îÄ‚îÄ deploy.yml
‚îú‚îÄ‚îÄ app
‚îÇ   ‚îú‚îÄ‚îÄ Console
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ Commands
‚îÇ   ‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ FetchWeatherCommand.php
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ Kernel.php
‚îÇ   ‚îú‚îÄ‚îÄ Exceptions
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ WeatherApiException.php
‚îÇ   ‚îú‚îÄ‚îÄ Formatters
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ WeatherFormatterInterface.php
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ MarkdownFormatter.php
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ TextFormatter.php
‚îÇ   ‚îú‚îÄ‚îÄ Providers
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ TelegramServiceProvider.php
‚îÇ   ‚îî‚îÄ‚îÄ Services
‚îÇ       ‚îú‚îÄ‚îÄ Telegram
‚îÇ       ‚îÇ   ‚îî‚îÄ‚îÄ TelegramService.php
‚îÇ       ‚îî‚îÄ‚îÄ Weather
‚îÇ           ‚îú‚îÄ‚îÄ WeatherService.php
‚îÇ           ‚îú‚îÄ‚îÄ WeatherAdapterInterface.php
‚îÇ           ‚îú‚îÄ‚îÄ WindyAdapter.php
‚îÇ           ‚îî‚îÄ‚îÄ OpenWeatherMapAdapter.php
‚îú‚îÄ‚îÄ config
‚îÇ   ‚îú‚îÄ‚îÄ app.php
‚îÇ   ‚îú‚îÄ‚îÄ services.php
‚îÇ   ‚îî‚îÄ‚îÄ weather.php
‚îú‚îÄ‚îÄ .env.example
‚îî‚îÄ‚îÄ README.md
```

### –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ

–î–ª—è —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è API –∏ –æ—Ç–ø—Ä–∞–≤–∫–∏ —Å–æ–æ–±—â–µ–Ω–∏–π –≤ Telegram, –º–æ–∂–Ω–æ –≤–æ—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å—Å—è —Å–ª–µ–¥—É—é—â–∏–º–∏ –∫–æ–º–∞–Ω–¥–∞–º–∏:

1. –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ Windy API:
```bash
php artisan weather:fetch-and-send --test-windy
```

2. –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ OpenWeatherMap API:
```bash
php artisan weather:fetch-and-send --test-openweathermap
```

3. –ó–∞–ø—É—Å–∫ –ø–æ–ª–Ω–æ–≥–æ –ø—Ä–æ—Ü–µ—Å—Å–∞ –ø–æ–ª—É—á–µ–Ω–∏—è –∏ –æ—Ç–ø—Ä–∞–≤–∫–∏ –ø—Ä–æ–≥–Ω–æ–∑–∞:
```bash
php artisan weather:fetch-and-send
```

–ö–∞–∂–¥–∞—è –∫–æ–º–∞–Ω–¥–∞ –±—É–¥–µ—Ç –≤—ã–≤–æ–¥–∏—Ç—å –ø–æ–¥—Ä–æ–±–Ω—É—é –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é –æ —Ö–æ–¥–µ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è –∏ –≤–æ–∑–º–æ–∂–Ω—ã—Ö –æ—à–∏–±–∫–∞—Ö.


## üöÄ –î–µ–ø–ª–æ–π –ø—Ä–æ–µ–∫—Ç–∞

### üì¶ –£—Å–ª–æ–≤–∏—è –¥–ª—è –¥–µ–ø–ª–æ—è
–î–µ–ø–ª–æ–π –æ—Å—É—â–µ—Å—Ç–≤–ª—è–µ—Ç—Å—è **–∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ —á–µ—Ä–µ–∑ GitHub Actions**, –µ—Å–ª–∏ –≤—ã–ø–æ–ª–Ω–µ–Ω—ã **–≤—Å–µ —Ç—Ä–∏ —É—Å–ª–æ–≤–∏—è**:

1. –ö–æ–¥ —É–∂–µ –Ω–∞—Ö–æ–¥–∏—Ç—Å—è –≤ –≤–µ—Ç–∫–µ `main`  
2. –°–æ–∑–¥–∞–Ω **—Ç–µ–≥** –≤–∏–¥–∞ `v1.0.0`, `v1.1.2`, –∏ —Ç.–¥.  
3. –≠—Ç–æ—Ç —Ç–µ–≥ —É–∫–∞–∑—ã–≤–∞–µ—Ç –Ω–∞ –∫–æ–º–º–∏—Ç –≤ `main`

---

### üîß –ö–∞–∫ –∑–∞–¥–µ–ø–ª–æ–∏—Ç—å –Ω–æ–≤—É—é –≤–µ—Ä—Å–∏—é

1. –£–±–µ–¥–∏—Å—å, —á—Ç–æ –∞–∫—Ç—É–∞–ª—å–Ω—ã–π –∫–æ–¥ –Ω–∞—Ö–æ–¥–∏—Ç—Å—è –≤ –≤–µ—Ç–∫–µ `main`:

   ```bash
   git checkout main
   git merge dev
   ```

2. –°–æ–∑–¥–∞–π –Ω–æ–≤—ã–π —Ç–µ–≥:

   ```bash
   git tag v1.0.0
   git push origin v1.0.0
   ```

3. GitHub Actions –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏:
   - –ø–æ–¥–∫–ª—é—á–∏—Ç—Å—è –∫ —Å–µ—Ä–≤–µ—Ä—É –ø–æ SSH
   - –≤—ã–ø–æ–ª–Ω–∏—Ç –¥–µ–ø–ª–æ–π-–ø—Ä–æ—Ü–µ–¥—É—Ä—É (`git pull`, –º–∏–≥—Ä–∞—Ü–∏–∏, –∫–µ—à–∏ –∏ —Ç.–¥.)
   - –æ—Ç–ø—Ä–∞–≤–∏—Ç —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ –æ –¥–µ–ø–ª–æ–µ –≤ Telegram (–µ—Å–ª–∏ –Ω–∞—Å—Ç—Ä–æ–µ–Ω–æ)

---

### ‚ùå –¢–µ–≥ –Ω–µ –≤ `main`?

–ï—Å–ª–∏ —Ç–µ–≥ —Å–æ–∑–¥–∞–Ω **–≤ –¥—Ä—É–≥–æ–π –≤–µ—Ç–∫–µ** (–Ω–∞–ø—Ä–∏–º–µ—Ä, `dev`) ‚Äî –¥–µ–ø–ª–æ–π –±—É–¥–µ—Ç **–∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –ø—Ä–µ—Ä–≤–∞–Ω**.
